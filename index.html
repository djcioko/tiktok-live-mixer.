<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Telecomandă Mixer</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <style>
        body { margin: 0; background: #121212; color: white; font-family: 'Segoe UI', sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; overflow: hidden; }
        .grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; width: 90%; max-width: 400px; }
        .btn { border: none; border-radius: 15px; padding: 25px 0; font-size: 24px; font-weight: bold; color: white; cursor: pointer; transition: all 0.2s; box-shadow: 0 4px 10px rgba(0,0,0,0.3); background: #d32f2f; /* Rosu (OFF) */ }
        .btn.active { background: #388e3c; /* Verde (ON) */ transform: scale(0.95); box-shadow: inset 0 4px 10px rgba(0,0,0,0.5); }
        .status-bar { margin-bottom: 20px; font-size: 14px; color: #aaa; }
    </style>
</head>
<body>

    <div class="status-bar" id="status">Conectare...</div>

    <div class="grid">
        <button class="btn" id="b1" onclick="toggleBtn(1)">1</button>
        <button class="btn" id="b2" onclick="toggleBtn(2)">2</button>
        <button class="btn" id="b3" onclick="toggleBtn(3)">3</button>
        <button class="btn" id="b4" onclick="toggleBtn(4)">4</button>
        <button class="btn" id="b5" onclick="toggleBtn(5)">5</button>
        <button class="btn" id="b6" onclick="toggleBtn(6)">6</button>
        <button class="btn" id="b7" onclick="toggleBtn(7)">7</button>
        <button class="btn" id="b8" onclick="toggleBtn(8)">8</button>
        <button class="btn" id="b9" onclick="toggleBtn(9)">9</button>
        <button class="btn" id="b10" onclick="toggleBtn(10)">10</button>
    </div>

    <script>
        let db;
        // Pune codurile tale Firebase aici (sau le va lua din memorie daca ai facut setarea)
        const k = localStorage.getItem('fb_key'), u = localStorage.getItem('fb_url');

        if(k && u) {
            firebase.initializeApp({ apiKey: k, databaseURL: u });
            db = firebase.database();
            document.getElementById('status').innerText = "ONLINE - Gata de Mix";

            // Ascultăm starea butoanelor (dacă laptopul zice că s-a terminat video-ul)
            db.ref('mixer_state').on('value', (snap) => {
                const activeId = snap.val();
                updateUI(activeId);
            });
        } else {
            const key = prompt("Firebase API Key:");
            const url = prompt("Database URL:");
            localStorage.setItem('fb_key', key);
            localStorage.setItem('fb_url', url);
            location.reload();
        }

        function toggleBtn(id) {
            // Trimitem comanda la laptop
            db.ref('mixer_cmd').set({ id: id, time: Date.now() });
        }

        function updateUI(activeId) {
            // Resetăm toate butoanele la roșu
            document.querySelectorAll('.btn').forEach(b => b.classList.remove('active'));
            // Dacă avem un buton activ, îl facem verde
            if(activeId) {
                document.getElementById('b' + activeId).classList.add('active');
            }
        }
    </script>
</body>
</html>
